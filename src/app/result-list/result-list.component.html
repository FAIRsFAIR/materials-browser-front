<table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>
    <ng-container matColumnDef="{{column}}" *ngFor="let column of columnsToDisplay">
        <th mat-header-cell *matHeaderCellDef> {{column|titlecase}} </th>
        <td mat-cell *matCellDef="let material"> {{material[column]}} </td>
    </ng-container>

    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
    <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let material" [attr.colspan]="columnsToDisplay.length">
            <div class="material-detail" [@detailExpand]="material == expandedMaterial ? 'expanded' : 'collapsed'">
                <div class="material-description">
                    <div class="doi-link"><a mat-stroked-button color="primary" href="{{material.doi}}"
                            target="_blank">{{material.doi}}</a>
                    </div>
                    <mat-chip-list>
                        <span *ngFor="let conceptRdfAbout of material.concept">
                            <mat-chip *ngIf="getConcept(conceptRdfAbout); let concept" #tooltip="matTooltip"
                                [matTooltip]="concept.rdfAbout" (click)="tooltip.toggle()">
                                {{concept.label}}
                            </mat-chip>
                        </span>
                    </mat-chip-list>
                </div>
            </div>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="columnsToDisplay; sticky: true"></tr>
    <tr mat-row *matRowDef="let material; columns: columnsToDisplay;" class="material-row"
        [class.material-expanded-row]="expandedMaterial === material"
        (click)="expandedMaterial = expandedMaterial === material ? null : material">
    </tr>
    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="material-detail-row"></tr>
</table>

<mat-paginator showFirstLastButtons [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users">
</mat-paginator>